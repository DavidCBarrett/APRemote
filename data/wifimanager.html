<!-- Code snippets from https://github.com/khoih-prog/ESP_WiFiManager_Lite/blob/main/src/ESP_WiFiManager_Lite.h -->  
<!-- ESP_WM_LITE_HTML_HEAD_START -->
<!DOCTYPE html>
<html>
    <head>
        <title>Wi-Fi Manager</title>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <!-- ESP_WM_LITE_HTML_HEAD_STYLE -->
        <style>
            div,input{padding:5px;font-size:1em;}
            input{width:95%;}
            body{text-align: center;}
            button{background-color:#16A1E7;color:#fff;line-height:2.4rem;font-size:1.2rem;width:100%;}
            fieldset{border-radius:0.3rem;margin:0px;}
        </style>
    <!-- ESP_WM_LITE_HTML_HEAD_END -->
    </head>
<body>
    <div class="topnav">
        <h1>Manager</h1>
    </div>

    <div style='text-align:left;display:inline-block;min-width:260px;'>
        <fieldset>
            <div><label>Primary WiFi SSID</label>
                <div>
                    <select id='PrimarySSID'>
<!--                         <datalist id='SSIDs'>  -->
                            <option>Select primary network ...</option>
<!--                         </datalist>  -->
                    </select>
                </div>
            </div>
            <div><label>PWD</label> <input value='[[pw]]' id='PrimaryPwd'></div>

            <div><label>Secondary WiFi SSID</label>
                <div>
                    <select id='SecondarySSID'>
                        <datalist id='SSIDs'>
                            <option>Select secondary network ...</option>
                        </datalist>
                    </select>
                </div>
            </div>
            <div><label>PWD</label> <input value='[[pw1]]' id='SecondardPwd'></div>
        </fieldset>
        <!-- ESP_WM_LITE_HTML_BUTTON -->
        <p><button onclick="scanWiFiNetworks()">Scan</button></p>
        <p><button onclick="saveWiFiCrendentials()">Save</button></p>
    </div>

    <!--ESP_WM_LITE_HTML_SCRIPT[]-->  
    <script id=\"jsbin-javascript\">

        function scanWiFiNetworks() {

            console.log("Scanning WiFi Networks...");

            // Construct the 'scanWiFiNetwork" HTTP GET request
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'scanWiFiNetworks');

            // Define the handler for the response to the HTTP GET request:
            xhr.onload = function() {
                if (xhr.status === 200) {
                    if (xhr.responseText) { // if the returned data is not null, update the values
                        var data = JSON.parse(xhr.responseText);
                        console.log("scanWiFiNetworks response:");
                        console.log(data);

                        // Add WiFi networks to the HTML drop-down "options" lists
                        //document.getElementById("CTS").innerText = data.cts;
                    }
                }
            };

            // Send the 'scanWiFiNetwork" HTTP GET request to the client
            xhr.send();
        }

        function udVal(key,val){
            var request=new XMLHttpRequest();
            var url='/?key='+key+'&value='+encodeURIComponent(val);
            request.open('GET',url,false);request.send(null);
        }

        function saveWiFiCrendentials()
        {
            udVal('PrimarySSID',document.getElementById('PrimarySSID').value);
            udVal('PrimaryPwd',document.getElementById('PrimaryPwd').value);
            udVal('SecondarySSID',document.getElementById('SecondarySSID').value);
            udVal('SecondardPwd',document.getElementById('SecondardPwd').value);
            // ESP_WM_LITE_HTML_SCRIPT_END
            alert('Updated');
        }
        
        function addNetworkToOptions() {
  			var x = document.getElementById("PrimarySSID");
  			var option = document.createElement("option");
  			option.text = "Kiwi";
  			x.add(option);
		}
    </script>
</body>
<!--ESP_WM_LITE_HTML_END-->
</html>